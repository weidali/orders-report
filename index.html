<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" 
      content="default-src 'self'; 
               script-src 'self' 'unsafe-inline'; 
               style-src 'self' 'unsafe-inline'; 
               object-src 'none';
               base-uri 'none';
               form-action 'self'">
    <title>Учет фьючерсных сделок</title>
    <meta name="description" content="Отслеживайте ваши криптовалютные фьючерсные сделки с сохранением в файл">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="import-export">
            <h3>Работа с файлами</h3>
            <div class="file-actions">
                <button id="save-file-btn">Сохранить в файл</button>
                <button id="load-file-btn">Загрузить из файла</button>
                <input type="file" id="file-input" accept=".json" style="display: none;">
            </div>
        </div>
        
        <div class="controls">
            <div class="coin-selector">
                <label for="coin-select">Выберите криптовалюту:</label>
                <select id="coin-select">
                    <option value="BTC">Bitcoin (BTC)</option>
                    <option value="ETH">Ethereum (ETH)</option>
                    <option value="SOL">Solana (SOL)</option>
                    <option value="XRP">Ripple (XRP)</option>
                    <option value="ADA">Cardano (ADA)</option>
                    <option value="DOT">Polkadot (DOT)</option>
                    <option value="DOGE">Dogecoin (DOGE)</option>
                    <option value="AVAX">Avalanche (AVAX)</option>
                </select>
            </div>
            
            <div class="action-buttons">
                <button id="add-trade-btn">Добавить сделку</button>
                <button id="clear-all-btn">Очистить все</button>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <h3>Общая прибыль</h3>
                <div class="stat-value" id="total-profit">0.00 USDT</div>
            </div>
            <div class="stat-card">
                <h3>Количество сделок</h3>
                <div class="stat-value" id="total-trades">0</div>
            </div>
            <div class="stat-card">
                <h3>Успешных сделок</h3>
                <div class="stat-value" id="success-rate">0%</div>
            </div>
            <div class="stat-card">
                <h3>Средняя прибыль</h3>
                <div class="stat-value" id="avg-profit">0.00 USDT</div>
            </div>
        </div>
        
        <div class="trade-form" id="trade-form" style="display: none;">
            <h3 class="form-title">Добавление новой сделки</h3>
            
            <div class="form-group">
                <label for="trade-date">Дата и время</label>
                <input type="datetime-local" id="trade-date">
            </div>
            
            <div class="form-group">
                <label for="trade-direction">Направление</label>
                <select id="trade-direction">
                    <option value="long">Лонг</option>
                    <option value="short">Шорт</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="entry-price">Цена входа (USDT)</label>
                <input type="number" id="entry-price" step="0.01" placeholder="0.00">
            </div>
            
            <div class="form-group">
                <label for="exit-price">Цена выхода (USDT)</label>
                <input type="number" id="exit-price" step="0.01" placeholder="0.00">
            </div>
            
            <div class="form-group">
                <label for="amount">Количество (контрактов)</label>
                <input type="number" id="amount" step="0.001" placeholder="0.00">
            </div>
            
            <div class="form-group">
                <label for="leverage">Плечо</label>
                <input type="number" id="leverage" value="5" min="1" max="100">
            </div>
            
            <div class="form-group">
                <label for="fee">Комиссия (%)</label>
                <input type="number" id="fee" value="0.06" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label for="notes">Примечания</label>
                <input type="text" id="notes" placeholder="Комментарий к сделке">
            </div>
            
            <div class="form-group" style="grid-column: 1 / -1;">
                <button id="save-trade-btn">Сохранить сделку</button>
                <button id="cancel-trade-btn" style="background: #7f8c8d;">Отмена</button>
            </div>
        </div>
        
        <div class="table-container">
            <div class="quick-filter">
                <!-- Фильтры периода -->
                <div class="controls">
                    <div class="period-selector">
                        <label for="period-select">Период:</label>
                        <select id="period-select">
                            <option value="all">Все время</option>
                            <option value="today">Сегодня</option>
                            <option value="week">Неделя</option>
                            <option value="month">Месяц</option>
                            <option value="year">Год</option>
                            <option value="custom">Произвольный</option>
                        </select>
                    </div>
                    
                    <div class="custom-period" id="custom-period" style="display: none;">
                        <input type="date" id="start-date" placeholder="Начальная дата">
                        <input type="date" id="end-date" placeholder="Конечная дата">
                        <button id="apply-custom-period">Применить</button>
                    </div>
                    
                    <div class="quick-periods">
                        <button class="quick-period" data-period="today">Сегодня</button>
                        <button class="quick-period" data-period="week">Неделя</button>
                        <button class="quick-period" data-period="month">Месяц</button>
                        <button class="quick-period" data-period="year">Год</button>
                    </div>
                </div>
            </div>
            <table id="trades-table">
                <thead>
                    <tr>
                        <th>Дата и время</th>
                        <th>Направление</th>
                        <th>Цена входа</th>
                        <th>Цена выхода</th>
                        <th>Кол-во</th>
                        <th>Плечо</th>
                        <th>P&L</th>
                        <th>ROE%</th>
                        <th>Примечания</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Данные будут добавляться через JavaScript -->
                </tbody>
            </table>
        </div>
        
        <footer>
                    <p class="footer-description">
                        Таблица для учёта фьючерсных сделок с криптовалютой | 
                        <span id="app-version">v0.1.5</span> 
                        Создано для отслеживания торговой деятельности
                    </p>
                </footer>
    </div>
    <script lang="JavaScript" src="js/script.js"></script>
    <script lang="JavaScript" src="js/security.js"></script>
    <script lang="JavaScript" src="js/filter.js"></script>
</body>
</html>